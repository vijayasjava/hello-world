---
- hosts: all
  become: true
  tasks:
  - name: stop docker container
    command: "docker stop helloworldshankar"
    ignore_errors: yes
  - name: remove existing docker container
    command: docker rm helloworldshankar
    ignore_errors: yes
  - name: building docker image
    command: docker build -t helloworldshankar .
    args:
      chdir: /opt/ansible
  - name: tag docker image
    command: "docker tag helloworldshankar vijayakrishnajava/helloworldshankar:latest"
  - name: run docker container
    command: "docker run -name helloworldshankar -d -p 8080:8080 vijayakrishnajava/helloworldshankar:latest"
        
